# 善恶值与声望值

---

## 1. 善恶值

### 1.1 定义

按照奈恩普遍的道德标准，衡量杰克在奈恩中行为的善恶程度的值，记为$K$，取值范围为$-100\le K\le 100$

### 1.2 善恶点

为了合理设计非线性的数值变化，引入概念“善恶点”作为善恶值的自变量。记善恶点为$p$，取值为所有整数

当玩家在游戏中进行某些行为时，系统将会根据奈恩的道德标准加以评价，同时给玩家的善恶点一增量$\Delta p$

为了避免玩家对**善恶点**和**善恶值**产生混淆，在游戏中只给玩家展示善恶值，而涉及善恶判断时也只采用善恶值来判断，善恶点仅用于后台计算善恶值。

### 1.3 非线性公式

考虑到“从善人变成圣人”比“从恶人变为善人”难得多，再加上善恶值存在上下限，显然我们需要对善恶值设计一个基于善恶点的非线性设计。

“善恶值越高，越难增加善恶值”可以理解为

$$dK=\frac{A}{Bp+C}dp$$

$其中A,B,C为待定常数$

将善恶值对善恶点积分

$$K=\int \frac{dK}{dp}dp=\int\frac{A}{Bp+C}dx=\frac{A}{B}\ln(Bp+C)+C_0$$

$其中C_0为待定系数$

显然游戏开始时，没有得到任何善恶点，而善恶值也应为0

$故可以得到初始条件：p=0时，K=0$

$\therefore C_0=-\frac{A}{B}\ln C$

$$K=\frac{A}{B}\ln(Bp+C)-\frac{A}{B}\ln C$$

取相对符合游戏逻辑的参数

$\begin{cases}
A=15\\
B=1\\
C=5
\end{cases}$

$$K=20\ln (p+15)-20\ln 15$$

考虑到正负对称性，得到以下分段函数

$$\begin{cases}
K=100 \quad (p>2200) \\
K=20\ln (p+15)-20\ln 15 \quad (0\le p\le 2200)\\
K=-20\ln (-p+15)+20\ln 15 \quad (-2200\le p\le 0) \\
K=-100\quad (p<-2200)
\end{cases}$$

### 1.4 善恶值对游戏的影响

#### 1.4.1 善恶改变

当玩家面临道德抉择时，将会获得或失去**道德点**，进而影响**道德值**

例1：

杰克回到布勒村，面对失去丈夫的女人选择是否交出日记：

- 我在山上找到了这个。（道德值增加）
- 请节哀，女士。（道德值不增不减）

例2:

杰克未经允许闯进居民的家，并且擅自拿走了居民的财产（道德值减少）

其中玩家在完成某种抉择后善恶点的增减量应提前在任务设计时设定，对玩家不可见

在玩家做出选择之后，可以在左上角跳出的文字提示得知

> 杰克的善恶值由xx增加到xx

#### 1.4.2 善恶值对游戏的影响（未完待续）

善恶值将会影响NPC对玩家的态度，产生好感修正。

善恶值可以解锁一些隐藏对话选项，如“威胁”、“劝告”等

善恶值和声望值可以联合起来，影响初见陌生人的态度等